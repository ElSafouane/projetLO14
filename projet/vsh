#! /bin/bash

#vsh

#Script coté client, il engagera la connexion avec le serveur


#On déclare les variables globales générales à toutes les commandes
declare -r mode=$1
declare -r NOM_SERV=$2
declare -r PORT=$3
declare -r ARCHIVE=$4


if [[ -z $NOM_SERV || -z $PORT ]];then
	echo "Veuillez rentrer un nom de serveur et un port"

else
	if [ "$mode" = "-create" ];then
		echo "Je suis rentré"
		for i in $(ls $(pwd))
			do
				if [ -d $i ]; then
					echo "Directory: $(pwd)/$i/"
				fi
				set -- $(ls -l | grep $i)
				
				echo $9 $1 $5

		done > $ARCHIVE
		echo ${mode:1} $ARCHIVE $(cat $ARCHIVE) | nc -w1 $NOM_SERV $PORT
	elif [ "$mode" = "-list" ];then
		echo ${mode:1} | nc -w1 $NOM_SERV $PORT
	fi
	
	 
fi

